/*Splat-ECS Memory*/
require=(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";function percentLoaded(){return images.totalImages+sounds.totalSounds===0?1:(images.loadedImages+sounds.loadedSounds)/(images.totalImages+sounds.totalSounds)}var canvas=document.getElementById("canvas"),context=canvas.getContext("2d"),Splat=require("splatjs"),animations=require("./animations"),entities=require("./entities"),images=new Splat.ImageLoader;images.loadFromManifest(require("./images"));var input=require("./inputs"),scenes=require("./scenes"),sounds=new Splat.SoundLoader;sounds.loadFromManifest(require("./sounds"));var systems=require("./systems"),game=new Splat.Game(canvas,animations,entities,images,input,require,scenes,sounds,systems),loading=Splat.loadingScene(canvas,percentLoaded,game.scene);loading.start(context);
},{"./animations":2,"./entities":3,"./images":4,"./inputs":5,"./scenes":61,"./sounds":63,"./systems":64,"splatjs":30}],"./scripts/main-enter":[function(require,module,exports){
"use strict";function addPlayer(t){utilities.generateEntity(structures.Player,t.entities)}function createCards(t){for(var i=[],e=[],r=0;6>r;r++)for(var n=0;5>n;n++)i.push(structures.Card(structures.CardType(cardTypes[n].id,cardTypes[n].color)));return i=utilities.shuffle(i),i.forEach(function(i,r){e.push(utilities.generateEntity(i,t.entities))}),e}function place(t){var i=.8*t.canvas.height/6,e=0;for(var r in t.entities.entities)t.entities.entities[r].card===!0&&(t.entities.entities[r].size={width:i,height:i},t.entities.entities[r].gridPosition=setPosition(e),t.entities.entities[r].drawPosition=calculateDraw(t.canvas,t.entities.entities[r]),e++)}function setPosition(t){var i=(t+1)%6,e=Math.floor(t/6);return{x:i,y:e}}function positionFromCenter(t,i){var e=t.width/2,r=i.gridPosition.x-3;return e-r*i.size.width}function calculateDraw(t,i){var e=t.height*(.8/6),r=positionFromCenter(t,i)-i.size.width/2,n=i.gridPosition.y*e+.2*t.height;return{x:r,y:n}}var utilities=require("./utilities"),cardTypes=[{id:1,color:"red"},{id:2,color:"blue"},{id:3,color:"green"},{id:4,color:"pink"},{id:5,color:"purple"}],structures={Card:function(t){var i={};return i.card=!0,i.selected=!1,i.type=t,i.isMatched=!1,i},CardType:function(t,i){var e={};return e.id=t,e.color=i,e},Player:function(){var t={};t.matches=0}};module.exports=function(t){addPlayer(t),createCards(t),place(t)};
},{"./utilities":62}],"./scripts/main-exit":[function(require,module,exports){
"use strict";module.exports=function(t){};
},{}],"./systems/renderer/render-player":[function(require,module,exports){
"use strict";module.exports=function(t,e){t.addEach(function(t,e){t.matched!==!0&&(e.fillStyle="black",t.selected&&(e.fillStyle=t.type.color),e.fillRect(t.drawPosition.x,t.drawPosition.y,t.size.width,t.size.height))},["card"])};
},{}],"./systems/simulation/player-input":[function(require,module,exports){
"use strict";function checkMatch(e,t){for(var i in e)console.log(e[i].card===!0&&e[i]!==t&&e[i].selected===!0,e[i],t),e[i].card===!0&&e[i]!==t&&e[i].selected===!0&&e[i].type.id===t.type.id&&(console.log(e[i],t),e[i].matched=!0,t.matched=!0)}function hideCards(e){for(var t in e)e[t].card===!0&&(e[t].selected=!1)}module.exports=function(e,t){var i=0;e.addEach(function(e,c){t.input.mouse.consumePressed(0,e.drawPosition.x,e.drawPosition.y,e.size.width,e.size.height)&&e.selected!==!0&&(e.selected=!0,i+=1,i>1&&(checkMatch(t.entities.entities,e),hideCards(t.entities.entities),i=0))},["card"])};
},{}],2:[function(require,module,exports){
module.exports={
}

},{}],3:[function(require,module,exports){
module.exports={
 "main": [
  {
    "id": 0,
    "name": "score"
  }
  
 ]
}

},{}],4:[function(require,module,exports){
module.exports=require(2)
},{"/home/aquisenberry/Development/projects/games/memory/animations.json":2}],5:[function(require,module,exports){
module.exports={
 "up": {
  "type": "button",
  "inputs": [
   {
    "device": "keyboard",
    "key": "w"
   },
   {
    "device": "keyboard",
    "key": "up"
   }
  ]
 },
 "down": {
  "type": "button",
  "inputs": [
   {
    "device": "keyboard",
    "key": "s"
   },
   {
    "device": "keyboard",
    "key": "down"
   }
  ]
 },
 "left": {
  "type": "button",
  "inputs": [
   {
    "device": "keyboard",
    "key": "a"
   },
   {
    "device": "keyboard",
    "key": "left"
   }
  ]
 },
 "right": {
  "type": "button",
  "inputs": [
   {
    "device": "keyboard",
    "key": "d"
   },
   {
    "device": "keyboard",
    "key": "right"
   }
  ]
 }
}

},{}],6:[function(require,module,exports){
"use strict";module.exports=function(){var r=-1;return function(t){-1===r&&(r=t);var n=t-r;return r=t,n}};
},{}],7:[function(require,module,exports){
"use strict";var platform=require("./platform");if(platform.isEjecta()){var adBanner=new window.Ejecta.AdBanner,isLandscape=window.innerWidth>window.innerHeight,sizes={iPhone:{portrait:{width:320,height:50},landscape:{width:480,height:32}},iPad:{portrait:{width:768,height:66},landscape:{width:1024,height:66}}},device=window.navigator.userAgent.indexOf("iPad")>=0?"iPad":"iPhone",size=sizes[device][isLandscape?"landscape":"portrait"];module.exports={show:function(i){adBanner.isAtBottom=i,adBanner.show()},hide:function(){adBanner.hide()},width:size.width,height:size.height}}else module.exports={show:function(){},hide:function(){},width:0,height:0};
},{"./platform":36}],8:[function(require,module,exports){
"use strict";function AStar(t){this.destX=0,this.destY=0,this.scaleX=1,this.scaleY=1,this.openNodes={},this.closedNodes={},this.openHeap=new BinaryHeap(function(t,e){return t.f-e.f}),this.isWalkable=t}function generatePath(t){for(var e=[];t.parent;){for(var s=t.x,i=t.y;s!==t.parent.x||i!==t.parent.y;){e.unshift({x:s,y:i});var r=t.parent.x-s;r>0?s++:0>r&&s--;var a=t.parent.y-i;a>0?i++:0>a&&i--}t=t.parent}return e}function makeKey(t,e){return t+","+e}var BinaryHeap=require("./binary_heap");AStar.prototype.heuristic=function(t,e){var s=Math.abs(t-this.destX)/this.scaleX,i=Math.abs(e-this.destY)/this.scaleY;return s+i},AStar.prototype.makeNode=function(t,e,s,i){i+=s.g;var r=this.heuristic(t,e);return{x:t,y:e,parent:s,f:i+r,g:s.g+i,h:r}},AStar.prototype.updateOpenNode=function(t,e,s){var i=this.openNodes[t];if(!i)return!1;var r=e.g+s;if(r>=i.g)return!0;i.parent=e,i.g=r,i.f=i.g+i.h;var a=this.openHeap.indexOf(i);return this.openHeap.bubbleUp(a),!0},AStar.prototype.insertNeighbor=function(t,e,s,i,r){var a=this.makeNode(e,s,i,r);this.openNodes[t]=a,this.openHeap.insert(a)},AStar.prototype.tryNeighbor=function(t,e,s,i){var r=makeKey(t,e);this.closedNodes[r]||this.isWalkable(t,e)&&(this.updateOpenNode(r,s,i)||this.insertNeighbor(r,t,e,s,i))},AStar.prototype.getNeighbors=function(t){var e=1.4,s=1;this.tryNeighbor(t.x-this.scaleX,t.y-this.scaleY,t,e),this.tryNeighbor(t.x,t.y-this.scaleY,t,s),this.tryNeighbor(t.x+this.scaleX,t.y-this.scaleY,t,e),this.tryNeighbor(t.x-this.scaleX,t.y,t,s),this.tryNeighbor(t.x+this.scaleX,t.y,t,s),this.tryNeighbor(t.x-this.scaleX,t.y+this.scaleY,t,e),this.tryNeighbor(t.x,t.y+this.scaleY,t,s),this.tryNeighbor(t.x+this.scaleX,t.y+this.scaleY,t,e)},AStar.prototype.search=function(t,e,s,i){function r(t,e){var s=t/e|0;return s*e}if(t=r(t,this.scaleX),e=r(e,this.scaleY),this.destX=r(s,this.scaleX),this.destY=r(i,this.scaleY),!this.isWalkable(this.destX,this.destY))return[];var a=makeKey(t,e),h={x:t,y:e,g:0,h:this.heuristic(t,e)};h.f=h.h,this.openNodes={},this.openNodes[a]=h,this.openHeap=new BinaryHeap(function(t,e){return t.f-e.f}),this.openHeap.insert(h),this.closedNodes={};for(var o=this.openHeap.deleteRoot();o;){var n=makeKey(o.x,o.y);if(delete this.openNodes[n],this.closedNodes[n]=o,o.x===this.destX&&o.y===this.destY)return generatePath(o);this.getNeighbors(o),o=this.openHeap.deleteRoot()}return[]},module.exports=AStar;
},{"./binary_heap":9}],9:[function(require,module,exports){
"use strict";function BinaryHeap(r){this.cmp=r,this.array=[],this.length=0}BinaryHeap.prototype.parentIndex=function(r){return(r-1)/2|0},BinaryHeap.prototype.firstChildIndex=function(r){return 2*r+1},BinaryHeap.prototype.bubbleUp=function(r){if(0!==r){var t=this.array[r],a=this.parentIndex(r),i=this.array[a];this.cmp(t,i)<0&&(this.array[a]=t,this.array[r]=i,this.bubbleUp(a))}},BinaryHeap.prototype.insert=function(r){this.array.push(r),this.length=this.array.length;var t=this.array.length-1;this.bubbleUp(t)},BinaryHeap.prototype.bubbleDown=function(r){var t=this.firstChildIndex(r),a=t+1,i=r;if(t<this.array.length&&this.cmp(this.array[t],this.array[i])<0&&(i=t),a<this.array.length&&this.cmp(this.array[a],this.array[i])<0&&(i=a),i!==r){var h=this.array[r];this.array[r]=this.array[i],this.array[i]=h,this.bubbleDown(i)}},BinaryHeap.prototype.deleteRoot=function(){var r=this.array[0];return this.array.length<=1?(this.array=[],this.length=0,r):(this.array[0]=this.array.pop(),this.length=this.array.length,this.bubbleDown(0),r)},BinaryHeap.prototype.indexOf=function(r){for(var t=0;t<this.array.length;t++)if(this.array[t]===r)return t;return-1},module.exports=BinaryHeap;
},{}],10:[function(require,module,exports){
"use strict";function makeCanvas(e,t){var r=document.createElement("canvas");return r.width=e,r.height=t,platform.isEjecta()&&(r.retinaResolutionEnabled=!1),r}function makeBuffer(e,t,r){var a=makeCanvas(e,t),o=a.getContext("2d");return platform.isEjecta()&&(o.imageSmoothingEnabled=!1),r(o),a}function flipBufferHorizontally(e){return makeBuffer(e.width,e.height,function(t){t.scale(-1,1),t.drawImage(e,-e.width,0)})}function flipBufferVertically(e){return makeBuffer(e.width,e.height,function(t){t.scale(1,-1),t.drawImage(e,0,-e.height)})}function rotateClockwise(e){var t=e.height,r=e.width,a=Math.floor(t/2),o=Math.floor(r/2);return makeBuffer(t,r,function(t){t.translate(a,o),t.rotate(Math.PI/2),t.drawImage(e,-o,-a)})}function rotateCounterclockwise(e){var t=e.height,r=e.width,a=Math.floor(t/2),o=Math.floor(r/2);return makeBuffer(t,r,function(t){t.translate(a,o),t.rotate(-Math.PI/2),t.drawImage(e,-o,-a)})}var platform=require("./platform");module.exports={makeBuffer:makeBuffer,flipBufferHorizontally:flipBufferHorizontally,flipBufferVertically:flipBufferVertically,rotateClockwise:rotateClockwise,rotateCounterclockwise:rotateCounterclockwise};
},{"./platform":36}],11:[function(require,module,exports){
"use strict";module.exports=function(e,t){return{name:e,time:0,frame:0,loop:t,speed:1}};
},{}],12:[function(require,module,exports){
"use strict";module.exports=function(t,e){return{x:t,y:e}};
},{}],13:[function(require,module,exports){
module.exports=require(12)
},{"/home/aquisenberry/Development/projects/games/memory/node_modules/splatjs/lib/components/camera.js":12}],14:[function(require,module,exports){
"use strict";module.exports=function(t,e,i,n,o,s,r,u,d){return{name:t,sourceX:e,sourceY:i,sourceWidth:n,sourceHeight:o,destinationX:s,destinationY:r,destinationWidth:u,destinationHeight:d}};
},{}],15:[function(require,module,exports){
"use strict";module.exports=function(e,t){return{up:!1,down:!1,left:!1,right:!1,upAccel:-e,downAccel:e,leftAccel:-e,rightAccel:e,upMax:-t,downMax:t,leftMax:-t,rightMax:t}};
},{}],16:[function(require,module,exports){
"use strict";module.exports=function(t,e,i,r){return{x:t,y:e,width:i,height:r}};
},{}],17:[function(require,module,exports){
"use strict";module.exports=function(t,e,r,u){return{up:t,down:e,left:r,right:u}};
},{}],18:[function(require,module,exports){
module.exports=require(12)
},{"/home/aquisenberry/Development/projects/games/memory/node_modules/splatjs/lib/components/camera.js":12}],19:[function(require,module,exports){
"use strict";module.exports=function(t,e){return{width:t,height:e}};
},{}],20:[function(require,module,exports){
"use strict";module.exports=function(){return{}};
},{}],21:[function(require,module,exports){
module.exports=require(12)
},{"/home/aquisenberry/Development/projects/games/memory/node_modules/splatjs/lib/components/camera.js":12}],22:[function(require,module,exports){
"use strict";function EntityPool(){this.nextId=0,this.entities={}}function objectValues(t){return Object.keys(t).map(function(i){return t[i]})}EntityPool.prototype.add=function(){var t=this.nextId;this.nextId++;var i={id:t};return this.entities[t]=i,i},EntityPool.prototype.save=function(){return objectValues(this.entities)},EntityPool.prototype.load=function(t){this.entities=t.reduce(function(t,i){return t[i.id]=i,this.nextId<=i.id&&(this.nextId=i.id+1),t}.bind(this),this.entities)},module.exports=EntityPool;
},{}],23:[function(require,module,exports){
"use strict";var timeAccumulator=require("time-accumulator");module.exports=function(e,t,r,i,u){function n(r){if(c){var m=a(r);o(m,function(r){t.run(e.entities,r)}),u.save(),i.run(e.entities,u,m),u.restore(),c&&window.requestAnimationFrame(n)}}var o=timeAccumulator(r),a=require("./absolute-to-relative")(),c=!0;return window.requestAnimationFrame(n),function(){c=!1}};
},{"./absolute-to-relative":6,"time-accumulator":60}],24:[function(require,module,exports){
"use strict";function clone(t){return void 0===t?void 0:JSON.parse(JSON.stringify(t))}function Game(t,e,i,s,n,o,r,a,c){this.animations=e,this.canvas=t,this.context=t.getContext("2d"),this.entities=i,this.images=s,this.input=new Input(n,t),this.require=o,this.scenes=r,this.sounds=a,this.systems=c,this.makeScenes(r)}var Input=require("./input"),Scene=require("./scene"),systems=require("./systems");Game.prototype.makeScenes=function(t){Object.keys(t).forEach(function(e){t[e].first&&(this.scene=this.makeScene(e,t[e],{}))}.bind(this))},Game.prototype.makeScene=function(t,e,i){var s=new Scene;s.entities.load(clone(this.entities[t]));var n=this.makeSceneData(s.entities,i);if(this.installSystems(t,this.systems.simulation,s.simulation,n),this.installSystems(t,this.systems.renderer,s.renderer,n),"string"==typeof e.onEnter){var o=this.loadScript(e.onEnter);"function"==typeof o&&(o=o.bind(s,n)),s.onEnter=o}if("string"==typeof e.onExit){var r=this.loadScript(e.onExit);"function"==typeof r&&(r=r.bind(s,n)),s.onExit=r}return s},Game.prototype.makeSceneData=function(t,e){return{animations:this.animations,arguments:e||{},canvas:this.canvas,context:this.context,entities:t,images:this.images,input:this.input,require:this.loadScript.bind(this),sounds:this.sounds,switchScene:this.switchScene.bind(this)}},Game.prototype.installSystems=function(t,e,i,s){e.forEach(function(e){if(-1!==e.scenes.indexOf(t)){var n=this.loadScript(e.name);void 0===n&&console.error("failed to load script",e.name),n(i,s)}}.bind(this))},Game.prototype.loadScript=function(t){if(0===t.indexOf("splatjs:")){var e=t.substr(8).split(".");return e.reduce(function(t,e){return t[e]},systems)}return this.require(t)},Game.prototype.switchScene=function(t,e){void 0!==this.scene&&this.scene.stop(),this.scene=this.makeScene(t,this.scenes[t],e),this.scene.start(this.context)},module.exports=Game;
},{"./input":27,"./scene":38,"./systems":40}],25:[function(require,module,exports){
"use strict";var platform=require("./platform");if(platform.isEjecta()){var iap=new window.Ejecta.IAPManager;module.exports={get:function(o,e){iap.getProducts([o],function(o,n){return o?void e(o):void e(void 0,n[0])})},buy:function(o,e,n){o.purchase(e,n)},restore:function(o){iap.restoreTransactions(function(e,n){return e?void o(e):void o(void 0,n.map(function(o){return o.productId}))})}}}else platform.isChromeApp()?module.exports={get:function(o,e){window.google.payments.inapp.getSkuDetails({parameters:{env:"prod"},sku:o,success:function(o){e(void 0,o.response.details.inAppProducts[0])},failure:function(o){e(o)}})},buy:function(o,e,n){window.google.payments.inapp.buy({parameters:{env:"prod"},sku:o.sku,success:function(o){n(void 0,o)},failure:function(o){n(o)}})},restore:function(o){window.google.payments.inapp.getPurchases({success:function(e){o(void 0,e.response.details.map(function(o){return o.sku}))},failure:function(e){o(e)}})}}:module.exports={get:function(o,e){e(void 0,void 0)},buy:function(o,e,n){n(void 0)},restore:function(o){o(void 0,[])}};
},{"./platform":36}],26:[function(require,module,exports){
"use strict";function ImageLoader(e){this.images={},this.totalImages=0,this.loadedImages=0,this.names=[],this.onLoad=e}ImageLoader.prototype.load=function(e,a){if(!(this.names.indexOf(e)>-1)){this.names.push(e),this.totalImages++;var o=new Image,t=this;o.addEventListener("load",function(){t.loadedImages++,t.images[e]=o,t.allLoaded()&&t.onLoad&&t.onLoad()}),o.addEventListener("error",function(){console.error("Error loading image "+a)}),o.src=a}},ImageLoader.prototype.loadFromManifest=function(e){var a=Object.keys(e),o=this;a.forEach(function(a){o.load(a,e[a])})},ImageLoader.prototype.allLoaded=function(){return this.totalImages===this.loadedImages},ImageLoader.prototype.get=function(e){return this.images[e]},module.exports=ImageLoader;
},{}],27:[function(require,module,exports){
"use strict";function Input(e,r){this.config=e,this.mouse=new Mouse(r)}var Keyboard=require("game-keyboard"),keyMap=require("game-keyboard/key_map").US,keyboard=new Keyboard(keyMap),Mouse=require("./mouse");Input.prototype.button=function(e){var r=this.config[e];if(void 0===r)return console.error("No such button: "+e),!1;if("button"!==r.type)return console.error('"'+e+'" is not a button'),!1;for(var o=0;o<r.inputs.length;o++){var t=r.inputs[o],u=t.device;if("keyboard"===u){var i=t.key;if(keyboard.isPressed(i))return!0}if("touch"===u)for(var n=0;n<this.mouse.touches.length;n++){var s=this.mouse.touches[n];if(s.x>=t.x&&s.x<t.x+t.width&&s.y>=t.y&&s.y<t.y+t.height)return!0}}return!1},module.exports=Input;
},{"./mouse":32,"game-keyboard":57,"game-keyboard/key_map":58}],28:[function(require,module,exports){
"use strict";var platform=require("./platform");if(platform.isEjecta()){var gameCenter=new window.Ejecta.GameCenter;gameCenter.softAuthenticate();var authFirst=function(e){gameCenter.authed?e():gameCenter.authenticate(function(t){t||e()})};module.exports={reportAchievement:function(e,t){authFirst(function(){gameCenter.reportAchievement(e,t)})},reportScore:function(e,t){authFirst(function(){gameCenter.reportScore(e,t)})},showAchievements:function(){authFirst(function(){gameCenter.showAchievements()})},showLeaderboard:function(e){authFirst(function(){gameCenter.showLeaderboard(e)})}}}else module.exports={reportAchievement:function(){},reportScore:function(){},showAchievements:function(){},showLeaderboard:function(){}};
},{"./platform":36}],29:[function(require,module,exports){
"use strict";var Scene=require("./scene");module.exports=function(e,f,t){var l=new Scene;return l.renderer.add(function(i,r){r.fillStyle="#000000",r.fillRect(0,0,e.width,e.height);var o=Math.floor(e.width/4),c=Math.floor(e.width/2),h=Math.floor(e.height/2);r.fillStyle="#ffffff",r.fillRect(o,h-15,c,30),r.fillStyle="#000000",r.fillRect(o+3,h-12,c-6,24),r.fillStyle="#ffffff";var n=(c-6)*f();r.fillRect(o+3,h-12,n,24),1===f()&&(l.stop(),t.start(r))}),l};
},{"./scene":38}],30:[function(require,module,exports){
"use strict";var buffer=require("./buffer");module.exports={makeBuffer:buffer.makeBuffer,flipBufferHorizontally:buffer.flipBufferHorizontally,flipBufferVertically:buffer.flipBufferVertically,ads:require("./ads"),AStar:require("./astar"),BinaryHeap:require("./binary_heap"),EntityPool:require("./entity-pool"),Game:require("./game"),iap:require("./iap"),ImageLoader:require("./image_loader"),Input:require("./input"),leaderboards:require("./leaderboards"),loadingScene:require("./loading-scene"),math:require("./math"),openUrl:require("./openUrl"),NinePatch:require("./ninepatch"),Particles:require("./particles"),saveData:require("./save_data"),Scene:require("./scene"),SoundLoader:require("./sound_loader"),components:{animation:require("./components/animation"),camera:require("./components/camera"),friction:require("./components/friction"),image:require("./components/image"),movement2d:require("./components/movement-2d"),playableArea:require("./components/playable-area"),playerController2d:require("./components/player-controller-2d"),position:require("./components/position"),size:require("./components/size"),timers:require("./components/timers"),velocity:require("./components/velocity")},systems:require("./systems")};
},{"./ads":7,"./astar":8,"./binary_heap":9,"./buffer":10,"./components/animation":11,"./components/camera":12,"./components/friction":13,"./components/image":14,"./components/movement-2d":15,"./components/playable-area":16,"./components/player-controller-2d":17,"./components/position":18,"./components/size":19,"./components/timers":20,"./components/velocity":21,"./entity-pool":22,"./game":24,"./iap":25,"./image_loader":26,"./input":27,"./leaderboards":28,"./loading-scene":29,"./math":31,"./ninepatch":33,"./openUrl":34,"./particles":35,"./save_data":37,"./scene":38,"./sound_loader":39,"./systems":40}],31:[function(require,module,exports){
"use strict";function oscillate(e,t){return Math.sin(e/t*Math.PI)}module.exports={oscillate:oscillate,Random:require("mersenne-twister")};
},{"mersenne-twister":59}],32:[function(require,module,exports){
"use strict";function relMouseCoordsEjecta(t,e){var o=t.width/window.innerWidth,s=t.height/window.innerHeight,n=e.pageX*o,u=e.pageY*s;return{x:n,y:u}}function Mouse(t){function e(){if(!u.supportsTouch()){var t=s("mouse");if(u.isPressed(0))if(void 0!==t){var e=u.touches[t];e.x=u.x,e.y=u.y}else u.touches.push({id:"mouse",x:u.x,y:u.y});else void 0!==t&&u.touches.splice(t,1)}}function o(t){u.x=t.x,u.y=t.y,0===u.buttons[0]&&(u.buttons[0]=2)}function s(t){for(var e=0;e<u.touches.length;e++)if(u.touches[e].id===t)return e;return void 0}function n(t,e){for(var o=t.changedTouches,s=0;s<o.length;s++)e(o[s])}this.x=0,this.y=0,this.buttons=[0,0,0],this.touches=[],this.onmouseup=void 0;var u=this;t.addEventListener("mousedown",function(o){var s=relMouseCoords(t,o);u.x=s.x,u.y=s.y,u.buttons[o.button]=2,e()}),t.addEventListener("mouseup",function(o){var s=relMouseCoords(t,o);u.x=s.x,u.y=s.y,u.buttons[o.button]=0,e(),u.onmouseup&&u.onmouseup(u.x,u.y)}),t.addEventListener("mousemove",function(o){var s=relMouseCoords(t,o);u.x=s.x,u.y=s.y,e()}),t.addEventListener("touchstart",function(e){n(e,function(e){var s=relMouseCoords(t,e);s.id=e.identifier,0===u.touches.length&&(s.isMouse=!0,o(s)),u.touches.push(s)})}),t.addEventListener("touchmove",function(e){n(e,function(e){var n=s(e.identifier),i=u.touches[n],r=relMouseCoords(t,e);i.x=r.x,i.y=r.y,i.isMouse&&o(i)})}),t.addEventListener("touchend",function(t){n(t,function(t){var e=s(t.identifier),n=u.touches.splice(e,1)[0];n.isMouse&&(0===u.touches.length?u.buttons[0]=0:(u.touches[0].isMouse=!0,o(u.touches[0]))),u.onmouseup&&u.onmouseup(n.x,n.y)})})}var platform=require("./platform");document.ontouchmove=function(t){t.preventDefault()},window.oncontextmenu=function(){return!1};var relMouseCoords=function(t,e){var o=e.pageX-t.offsetLeft+document.body.scrollLeft,s=e.pageY-t.offsetTop+document.body.scrollTop;return t.style.width.length&&(o*=t.width/t.style.width.substring(0,t.style.width.indexOf("p"))),t.style.height.length&&(s*=t.height/t.style.height.substring(0,t.style.height.indexOf("p"))),{x:o,y:s}};platform.isEjecta()&&(relMouseCoords=relMouseCoordsEjecta),Mouse.prototype.supportsTouch=function(){return"ontouchstart"in window||navigator.msMaxTouchPoints},Mouse.prototype.isPressed=function(t,e,o,s,n){var u=this.buttons[t]>=1;return arguments.length>1&&(this.x<e||this.x>e+s||this.y<o||this.y>o+n)&&(u=!1),u},Mouse.prototype.consumePressed=function(t,e,o,s,n){var u=2===this.buttons[t];if(arguments.length>1&&(this.x<e||this.x>e+s||this.y<o||this.y>o+n)&&(u=!1),u&&(this.buttons[t]=1,0===t))for(var i=0;i<this.touches.length;i++)this.touches[i].consumed=!0;return u},module.exports=Mouse;
},{"./platform":36}],33:[function(require,module,exports){
"use strict";function getContextForImage(h){var t;return buffer.makeBuffer(h.width,h.height,function(i){i.drawImage(h,0,0,h.width,h.height),t=i}),t}function NinePatch(h){this.img=h;for(var t,i,s=h.width-1,w=h.height-1,a=getContextForImage(h),e=s,r=s,g=0;s>g;g++)if(t=a.getImageData(g,w,1,1).data,i=t[3],e===s&&i>0&&(e=g),s>e&&0===i){r=g;break}this.w1=e,this.w2=r-e,this.w3=s-r,e=r=w;for(var m=0;w>m;m++)if(t=a.getImageData(s,m,1,1).data,i=t[3],e===w&&i>0&&(e=m),w>e&&0===i){r=m;break}this.h1=e,this.h2=r-e,this.h3=w-r}var buffer=require("./buffer");NinePatch.prototype.draw=function(h,t,i,s,w){t=0|t,i=0|i,s=0|s,w=0|w;var a,e,r,g;for(e=i+this.h1;e<i+w-this.h3;e+=this.h2)for(a=t+this.w1;a<t+s-this.w3;a+=this.w2)r=Math.min(this.w2,t+s-this.w3-a),g=Math.min(this.h2,i+w-this.h3-e),h.drawImage(this.img,this.w1,this.h1,r,g,a,e,r,g);for(e=i+this.h1;e<i+w-this.h3;e+=this.h2)g=Math.min(this.h2,i+w-this.h3-e),this.w1>0&&h.drawImage(this.img,0,this.h1,this.w1,g,t,e,this.w1,g),this.w3>0&&h.drawImage(this.img,this.w1+this.w2,this.h1,this.w3,g,t+s-this.w3,e,this.w3,g);for(a=t+this.w1;a<t+s-this.w3;a+=this.w2)r=Math.min(this.w2,t+s-this.w3-a),this.h1>0&&h.drawImage(this.img,this.w1,0,r,this.h1,a,i,r,this.h1),this.h3>0&&h.drawImage(this.img,this.w1,this.w1+this.w2,r,this.h3,a,i+w-this.h3,r,this.h3);this.w1>0&&this.h1>0&&h.drawImage(this.img,0,0,this.w1,this.h1,t,i,this.w1,this.h1),this.w3>0&&this.h1>0&&h.drawImage(this.img,this.w1+this.w2,0,this.w3,this.h1,t+s-this.w3,i,this.w3,this.h1),this.w1>0&&this.h3>0&&h.drawImage(this.img,0,this.h1+this.h2,this.w1,this.h3,t,i+w-this.h3,this.w1,this.h3),this.w3>0&&this.h3>0&&h.drawImage(this.img,this.w1+this.w2,this.h1+this.h2,this.w3,this.h3,t+s-this.w3,i+w-this.h3,this.w3,this.h3)},module.exports=NinePatch;
},{"./buffer":10}],34:[function(require,module,exports){
"use strict";var platform=require("./platform");module.exports=function(o){window.open(o)},platform.isEjecta()&&(module.exports=function(o){window.ejecta.openURL(o)});
},{"./platform":36}],35:[function(require,module,exports){
"use strict";function Particles(t,e,a){this.particles=[],this.setupParticle=e,this.drawParticle=a;for(var i=0;t>i;i++){var r={x:0,y:0,vx:0,vy:0,enabled:!1,age:0};this.setupParticle(r),this.particles.push(r)}this.gravity=.1,this.maxAge=1e3}Particles.prototype.move=function(t){for(var e=0;e<this.particles.length;e++){var a=this.particles[e];a.enabled&&(a.age+=t,a.age>this.maxAge?a.enabled=!1:(a.x+=a.vx*t,a.y+=a.vy*t,a.vy+=this.gravity))}},Particles.prototype.draw=function(t){for(var e=0;e<this.particles.length;e++){var a=this.particles[e];a.enabled&&this.drawParticle(t,a)}},Particles.prototype.add=function(t,e,a,i,r){function s(t){t.enabled=!0,t.age=0,t.x=e,t.y=a,t.vx=(Math.random()-.5)*i,t.vy=(Math.random()-.5)*i,c.setupParticle(t,r)}for(var l,c=this,n=0;n<this.particles.length;n++)if(l=this.particles[n],!l.enabled){if(1>t)return;t--,s(l)}for(this.particles.sort(function(t,e){return e.age-t.age}),n=0;t>n;n++)l=this.particles[n],s(l)},Particles.prototype.reset=function(){for(var t=0;t<this.particles.length;t++)this.particles[t].enabled=!1},module.exports=Particles;
},{}],36:[function(require,module,exports){
"use strict";module.exports={isChromeApp:function(){return window.chrome&&window.chrome.app&&window.chrome.app.runtime},isEjecta:function(){return window.ejecta}};
},{}],37:[function(require,module,exports){
"use strict";function cookieGet(e){var t="; "+document.cookie,o=t.split("; "+e+"=");if(2===o.length)return o.pop().split(";").shift();throw"cookie "+e+" was not found"}function cookieSet(e,t){var o=new Date;o.setTime(o.getTime()+31536e6);var r=e+"="+t+"; expires="+o.toUTCString()+";";document.cookie=r}function getMultiple(e,t,o){"string"==typeof t&&(t=[t]);try{var r=t.map(function(t){return[t,e(t)]}).reduce(function(e,t){return e[t[0]]=t[1],e},{});o(void 0,r)}catch(a){o(a)}}function setMultiple(e,t,o){try{for(var r in t)t.hasOwnProperty(r)&&e(r,t[r]);o()}catch(a){o(a)}}function localStorageGet(e){return window.localStorage.getItem(e)}function localStorageSet(e,t){window.localStorage.setItem(e,t.toString())}function chromeStorageGet(e,t){window.chrome.storage.sync.get(e,function(e){window.chrome.runtime.lastError?t(window.chrome.runtime.lastError):t(void 0,e)})}function chromeStorageSet(e,t){window.chrome.storage.sync.set(e,function(){t(window.chrome.runtime.lastError)})}var platform=require("./platform"),cookieSaveData={get:getMultiple.bind(void 0,cookieGet),set:setMultiple.bind(void 0,cookieSet)},localStorageSaveData={get:getMultiple.bind(void 0,localStorageGet),set:setMultiple.bind(void 0,localStorageSet)},chromeStorageSaveData={get:chromeStorageGet,set:chromeStorageSet};platform.isChromeApp()?module.exports=chromeStorageSaveData:window.localStorage?module.exports=localStorageSaveData:module.exports=cookieSaveData;
},{"./platform":36}],38:[function(require,module,exports){
"use strict";function Scene(){this.simulation=new ECS,this.renderer=new ECS,this.entities=new EntityPool,this.simulationStepTime=5}var ECS=require("entity-component-system"),EntityPool=require("./entity-pool"),gameLoop=require("./game-loop");Scene.prototype.start=function(t){this._stop||("function"==typeof this.onEnter&&this.onEnter(),this._stop=gameLoop(this.entities,this.simulation,this.simulationStepTime,this.renderer,t))},Scene.prototype.stop=function(){this._stop&&(this._stop(),delete this._stop,"function"==typeof this.onExit&&this.onExit())},module.exports=Scene;
},{"./entity-pool":22,"./game-loop":23,"entity-component-system":56}],39:[function(require,module,exports){
"use strict";function SoundLoader(o){this.sounds={},this.totalSounds=0,this.loadedSounds=0,this.muted=!1,this.looping={},this.context=new window.AudioContext,this.gainNode=this.context.createGain(),this.gainNode.connect(this.context.destination),this.volume=this.gainNode.gain.value,this.onLoad=o}function AudioTagSoundLoader(o){this.sounds={},this.totalSounds=0,this.loadedSounds=0,this.muted=!1,this.looping={},this.volume=(new Audio).volume,this.onLoad=o}function setAudioTagVolume(o,t){for(var e in o)o.hasOwnProperty(e)&&(o[e].volume=t)}function FakeSoundLoader(o){this.onLoad=o}window.AudioContext=window.AudioContext||window.webkitAudioContext,SoundLoader.prototype.load=function(o,t){var e=this;if(0===this.totalSounds){var n=function(){window.removeEventListener("click",n),window.removeEventListener("keydown",n),window.removeEventListener("touchstart",n);var o=e.context.createOscillator();o.connect(e.gainNode),o.start(0),o.stop(0),e.firstPlay?e.play(e.firstPlay,e.firstPlayLoop):e.firstPlay="workaround"};window.addEventListener("click",n),window.addEventListener("keydown",n),window.addEventListener("touchstart",n)}this.totalSounds++;var d=new XMLHttpRequest;d.open("GET",t,!0),d.responseType="arraybuffer",d.addEventListener("readystatechange",function(){return 4===d.readyState?200!==d.status&&0!==d.status?void console.error("Error loading sound "+t):void e.context.decodeAudioData(d.response,function(t){e.sounds[o]=t,e.loadedSounds++,e.allLoaded()&&e.onLoad&&e.onLoad()},function(o){console.error("Error decoding audio data for "+t+": "+o)}):void 0}),d.addEventListener("error",function(){console.error("Error loading sound "+t)});try{d.send()}catch(i){console.error("Error loading sound",t,i)}},SoundLoader.prototype.loadFromManifest=function(o){var t=Object.keys(o),e=this;t.forEach(function(t){e.load(t,o[t])})},SoundLoader.prototype.allLoaded=function(){return this.totalSounds===this.loadedSounds},SoundLoader.prototype.play=function(o,t){if(!t||!this.looping[o]){if(!this.firstPlay)return this.firstPlay=o,void(this.firstPlayLoop=t);var e=this.sounds[o];void 0===e&&console.error("Unknown sound: "+o);var n=this.context.createBufferSource();n.buffer=e,n.connect(this.gainNode),t&&(n.loop=!0,this.looping[o]=n),n.start(0)}},SoundLoader.prototype.stop=function(o){this.looping[o]&&(this.looping[o].stop(0),delete this.looping[o])},SoundLoader.prototype.mute=function(){this.gainNode.gain.value=0,this.muted=!0},SoundLoader.prototype.unmute=function(){this.gainNode.gain.value=this.volume,this.muted=!1},SoundLoader.prototype.setVolume=function(o){this.volume=o,this.gainNode.gain=o,this.muted=!1},SoundLoader.prototype.isMuted=function(){return this.muted},AudioTagSoundLoader.prototype.load=function(o,t){this.totalSounds++;var e=new Audio,n=this;e.addEventListener("error",function(){console.error("Error loading sound "+t)}),e.addEventListener("canplaythrough",function(){n.sounds[o]=e,n.loadedSounds++,n.allLoaded()&&n.onLoad&&n.onLoad()}),e.volume=this.volume,e.src=t,e.load()},AudioTagSoundLoader.prototype.loadFromManifest=function(o){var t=Object.keys(o),e=this;t.forEach(function(t){e.load(t,o[t])})},AudioTagSoundLoader.prototype.allLoaded=function(){return this.totalSounds===this.loadedSounds},AudioTagSoundLoader.prototype.play=function(o,t){if(!t||!this.looping[o]){var e=this.sounds[o];void 0===e&&console.error("Unknown sound: "+o),t&&(e.loop=!0,this.looping[o]=e),e.play()}},AudioTagSoundLoader.prototype.stop=function(o){var t=this.looping[o];t&&(t.loop=!1,t.pause(),t.currentTime=0,delete this.looping[o])},AudioTagSoundLoader.prototype.mute=function(){setAudioTagVolume(this.sounds,0),this.muted=!0},AudioTagSoundLoader.prototype.unmute=function(){setAudioTagVolume(this.sounds,this.volume),this.muted=!1},AudioTagSoundLoader.prototype.setVolume=function(o){this.volume=o,setAudioTagVolume(this.sounds,o),this.muted=!1},AudioTagSoundLoader.prototype.isMuted=function(){return this.muted},FakeSoundLoader.prototype.load=function(){this.onLoad&&this.onLoad()},FakeSoundLoader.prototype.loadFromManifest=function(){},FakeSoundLoader.prototype.allLoaded=function(){return!0},FakeSoundLoader.prototype.play=function(){},FakeSoundLoader.prototype.stop=function(){},FakeSoundLoader.prototype.mute=function(){},FakeSoundLoader.prototype.unmute=function(){},FakeSoundLoader.prototype.setVolume=function(){},FakeSoundLoader.prototype.isMuted=function(){return!0},window.AudioContext?module.exports=SoundLoader:window.Audio?module.exports=AudioTagSoundLoader:(console.log("This browser doesn't support the Web Audio API or the HTML5 audio tag."),module.exports=FakeSoundLoader);
},{}],40:[function(require,module,exports){
"use strict";module.exports={advanceAnimations:require("./systems/advance-animations"),advanceTimers:require("./systems/advance-timers"),applyFriction:require("./systems/apply-friction"),applyMovement2d:require("./systems/apply-movement-2d"),applyVelocity:require("./systems/apply-velocity"),boxCollider:require("./systems/box-collider"),centerPosition:require("./systems/center-position"),clearScreen:require("./systems/clear-screen"),constrainToPlayableArea:require("./systems/constrain-to-playable-area"),controlPlayer:require("./systems/control-player"),drawFrameRate:require("./systems/draw-frame-rate"),drawImage:require("./systems/draw-image"),drawRectangles:require("./systems/draw-rectangles"),followParent:require("./systems/follow-parent"),viewport:require("./systems/viewport")};
},{"./systems/advance-animations":41,"./systems/advance-timers":42,"./systems/apply-friction":43,"./systems/apply-movement-2d":44,"./systems/apply-velocity":45,"./systems/box-collider":46,"./systems/center-position":47,"./systems/clear-screen":48,"./systems/constrain-to-playable-area":49,"./systems/control-player":50,"./systems/draw-frame-rate":51,"./systems/draw-image":52,"./systems/draw-rectangles":53,"./systems/follow-parent":54,"./systems/viewport":55}],41:[function(require,module,exports){
"use strict";function setOwnPropertiesDeep(i,a){for(var n=Object.keys(i),e=0;e<n.length;e++){var t=n[e],o=i[t];"object"==typeof o?(a[t]||(a[t]={}),setOwnPropertiesDeep(o,a[t])):a[t]=o}}module.exports=function(i,a){i.addEach(function(i,n){if(void 0!==i.animation){var e=a.animations[i.animation.name];if(void 0!==e){for(i.animation.time+=n*i.animation.speed;i.animation.time>e[i.animation.frame].time;)i.animation.time-=e[i.animation.frame].time,i.animation.frame++,i.animation.frame>=e.length&&(i.animation.loop?i.animation.frame=0:i.animation.frame--);setOwnPropertiesDeep(e[i.animation.frame].properties,i)}}},["animation"])};
},{}],42:[function(require,module,exports){
"use strict";module.exports=function(i,r){i.addEach(function(i,t){var e=Object.keys(i.timers);e.forEach(function(e){var n=i.timers[e];if(n.running&&(n.time+=t,n.time>n.max&&(n.running=!1,n.time=0,void 0!==n.script))){var c=r.require(n.script);c(i,r)}})},["timers"])};
},{}],43:[function(require,module,exports){
"use strict";module.exports=function(i){i.addEach(function(i,t){i.velocity.x*=i.friction.x,i.velocity.y*=i.friction.y},["velocity","friction"])};
},{}],44:[function(require,module,exports){
"use strict";module.exports=function(e){e.addEach(function(e,t){e.movement2d.up&&e.velocity.y>e.movement2d.upMax&&(e.velocity.y+=e.movement2d.upAccel),e.movement2d.down&&e.velocity.y<e.movement2d.downMax&&(e.velocity.y+=e.movement2d.downAccel),e.movement2d.left&&e.velocity.x>e.movement2d.leftMax&&(e.velocity.x+=e.movement2d.leftAccel),e.movement2d.right&&e.velocity.x<e.movement2d.rightMax&&(e.velocity.x+=e.movement2d.rightAccel)},["velocity","movement2d"])};
},{}],45:[function(require,module,exports){
"use strict";module.exports=function(o){o.addEach(function(o,i){o.position.x+=o.velocity.x*i,o.position.y+=o.velocity.y*i},["position","velocity"])};
},{}],46:[function(require,module,exports){
"use strict";function toGrid(i){return Math.floor(i/gridSize)}function keys(i){for(var o=toGrid(i.position.x),s=toGrid(i.position.x+i.size.width),n=toGrid(i.position.y),t=toGrid(i.position.y+i.size.height),e=[],r=o;s>=r;r++)for(var l=n;t>=l;l++)e.push(r+","+l);return e}function add(i,o,s){if(!i[s])return void(i[s]=[o]);for(var n=0;n<i[s].length;n++){var t=i[s][n];void 0!==t.collisions&&collides(o,t)&&(o.collisions.push(t.id),t.collisions.push(o.id))}i[s].push(o)}function remove(i,o,s){var n=i[s],t=n.indexOf(o);-1!==t&&n.splice(t,1)}function collides(i,o){return o.position.x+o.size.width>i.position.x&&o.position.x<i.position.x+i.size.width&&o.position.y+o.size.height>i.position.y&&o.position.y<i.position.y+i.size.height}function areArraysSame(i,o){if(i.length!==o.length)return!1;for(var s=0;s<i.length;s++)if(i[s]!==o[s])return!1;return!0}var gridSize=64;module.exports=function(i,o){var s={};i.addEach(function(i,n){function t(o){return o!==i.id}if(void 0===i.collisionKeys||void 0!==i.velocity){var e=i.collisionKeys||[];if(i.collisionKeys=keys(i),void 0!==i.velocity||!areArraysSame(e,i.collisionKeys)){for(var r=0;r<e.length;r++)remove(s,i,e[r]);for(r=0;r<i.collisions.length;r++){var l=o.entities.entities[i.collisions[r]];l.collisions=l.collisions.filter(t)}for(i.collisions=[],r=0;r<i.collisionKeys.length;r++)add(s,i,i.collisionKeys[r])}}},["position","size","collisions"])};
},{}],47:[function(require,module,exports){
"use strict";module.exports=function(o,i){o.addEach(function(o,t){o.center.x&&(o.position.x=Math.floor(i.canvas.width/2),o.size&&(o.position.x-=Math.floor(o.size.width/2))),o.center.y&&(o.position.y=Math.floor(i.canvas.height/2),o.size&&(o.position.y-=Math.floor(o.size.height/2)))},["position","center"])};
},{}],48:[function(require,module,exports){
"use strict";module.exports=function(t,c){t.add(function(t,a){a.clearRect(0,0,c.canvas.width,c.canvas.height)})};
},{}],49:[function(require,module,exports){
"use strict";module.exports=function(a){a.addEach(function(a,e){a.position.x<a.playableArea.x&&(a.position.x=a.playableArea.x),a.position.x+a.size.width>a.playableArea.x+a.playableArea.width&&(a.position.x=a.playableArea.x+a.playableArea.width-a.size.width),a.position.y<a.playableArea.y&&(a.position.y=a.playableArea.y),a.position.y+a.size.height>a.playableArea.y+a.playableArea.height&&(a.position.y=a.playableArea.y+a.playableArea.height-a.size.height)},["position","size","playableArea"])};
},{}],50:[function(require,module,exports){
"use strict";module.exports=function(t,e){t.addEach(function(t,o){t.movement2d.up=e.input.button(t.playerController2d.up),t.movement2d.down=e.input.button(t.playerController2d.down),t.movement2d.left=e.input.button(t.playerController2d.left),t.movement2d.right=e.input.button(t.playerController2d.right)},["movement2d","playerController2d"])};
},{}],51:[function(require,module,exports){
"use strict";module.exports=function(e,l){e.add(function(e,t,o){var i=Math.floor(1e3/o);t.font="24px mono",30>i?t.fillStyle="red":50>i?t.fillStyle="yellow":t.fillStyle="green";var f=i+" FPS",n=t.measureText(f).width;t.fillText(f,l.canvas.width-n-50,50)})};
},{}],52:[function(require,module,exports){
"use strict";function drawEntity(i,e,n){var o=i.images.get(e.image.name);if(!o)return void console.error("No such image",e.image.name);try{n.drawImage(o,e.image.sourceX,e.image.sourceY,e.image.sourceWidth,e.image.sourceHeight,e.image.destinationX+e.position.x,e.image.destinationY+e.position.y,e.image.destinationWidth,e.image.destinationHeight)}catch(t){console.error("Error drawing image",e.image.name,t)}}module.exports=function(i,e){i.add(function(i,n){var o=Object.keys(i);o.sort(function(e,n){var o=(i[e].zindex||{zindex:0}).zindex,t=(i[n].zindex||{zindex:0}).zindex,a=(i[e].position||{y:0}).y,r=(i[n].position||{y:0}).y;return o-t||a-r});for(var t=0;t<o.length;t++){var a=i[o[t]];void 0!==a.image&&void 0!==a.position&&drawEntity(e,a,n)}})};
},{}],53:[function(require,module,exports){
"use strict";module.exports=function(t){t.addEach(function(t,o){t.strokeStyle&&(o.strokeStyle=t.strokeStyle),o.strokeRect(Math.floor(t.position.x),Math.floor(t.position.y),t.size.width,t.size.height)},["position","size"])};
},{}],54:[function(require,module,exports){
"use strict";function distanceSquared(i,t,o,n){return(i-o)*(i-o)+(t-n)*(t-n)}module.exports=function(i,t){i.addEach(function(i,o){var n=i.position.x+i.size.width/2,s=i.position.y+i.size.height/2,a=t.entities.entities[i.follow.id];if(void 0!==a){var e=a.position.x+a.size.width/2,d=a.position.y+a.size.height/2,r=Math.atan2(d-s,e-n);void 0!==i.rotation&&(i.rotation.angle=r-Math.PI/2);var h=distanceSquared(n,s,e,d);if(!(h<i.follow.distance*i.follow.distance)){var l=Math.sqrt(h)-i.follow.distance;i.position.x+=l*Math.cos(r),i.position.y+=l*Math.sin(r)}}},["position","follow"])};
},{}],55:[function(require,module,exports){
"use strict";var x=0,y=0;module.exports={moveToCamera:function(a){a.add(function(a,o){x=0,y=0}),a.addEach(function(a,o){var t=Math.floor(a.position.x+a.camera.x)-x,n=Math.floor(a.position.y+a.camera.y)-y;x+=t,y+=n,o.translate(-t,-n)},["camera","position"])},reset:function(a){a.addEach(function(a,o){o.translate(x,y),x=0,y=0},["camera","position"])}};
},{}],56:[function(require,module,exports){
"use strict";function EntityComponentSystem(){this.systems=[],this.now=function(){return 0}}function entityHasComponents(t,n){for(var s=0;s<t.length;s++)if(!n.hasOwnProperty(t[s]))return!1;return!0}EntityComponentSystem.prototype.add=function(t){this.systems.push(t)},EntityComponentSystem.prototype.addEach=function(t,n){this.systems.push(function(s){for(var o=arguments,e=Object.keys(s),i=0;i<e.length;i++){var r=s[e[i]];(!n||entityHasComponents(n,r))&&(o[0]=r,t.apply(void 0,o))}})},EntityComponentSystem.prototype.run=function(){for(var t=arguments,n=[],s=0;s<this.systems.length;s++){var o=this.now();this.systems[s].apply(void 0,t),n.push(this.now()-o)}return n},module.exports=EntityComponentSystem;
},{}],57:[function(require,module,exports){
"use strict";function Keyboard(e){this.keys={};var o=this;for(var r in e)e.hasOwnProperty(r)&&(this.keys[e[r]]=0);window.addEventListener("keydown",function(r){return e.hasOwnProperty(r.keyCode)?(0===o.keys[e[r.keyCode]]&&(o.keys[e[r.keyCode]]=2),!1):void 0}),window.addEventListener("keyup",function(r){return e.hasOwnProperty(r.keyCode)?(o.keys[e[r.keyCode]]=0,!1):void 0})}Keyboard.prototype.isPressed=function(e){return this.keys[e]>=1},Keyboard.prototype.consumePressed=function(e){var o=2===this.keys[e];return o&&(this.keys[e]=1),o},module.exports=Keyboard;
},{}],58:[function(require,module,exports){
module.exports={US:{8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"pause/break",20:"capslock",27:"escape",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",91:"leftwindow",92:"rightwindow",93:"select",96:"numpad-0",97:"numpad-1",98:"numpad-2",99:"numpad-3",100:"numpad-4",101:"numpad-5",102:"numpad-6",103:"numpad-7",104:"numpad-8",105:"numpad-9",106:"multiply",107:"add",109:"subtract",110:"decimalpoint",111:"divide",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scrolllock",186:"semicolon",187:"equals",188:"comma",189:"dash",190:"period",191:"forwardslash",192:"graveaccent",219:"openbracket",220:"backslash",221:"closebraket",222:"singlequote"}};
},{}],59:[function(require,module,exports){
var MersenneTwister=function(t){void 0==t&&(t=(new Date).getTime()),this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=new Array(this.N),this.mti=this.N+1,this.init_seed(t)};MersenneTwister.prototype.init_seed=function(t){for(this.mt[0]=t>>>0,this.mti=1;this.mti<this.N;this.mti++){var t=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30;this.mt[this.mti]=(1812433253*((4294901760&t)>>>16)<<16)+1812433253*(65535&t)+this.mti,this.mt[this.mti]>>>=0}},MersenneTwister.prototype.init_by_array=function(t,i){var s,h,n;for(this.init_seed(19650218),s=1,h=0,n=this.N>i?this.N:i;n;n--){var r=this.mt[s-1]^this.mt[s-1]>>>30;this.mt[s]=(this.mt[s]^(1664525*((4294901760&r)>>>16)<<16)+1664525*(65535&r))+t[h]+h,this.mt[s]>>>=0,s++,h++,s>=this.N&&(this.mt[0]=this.mt[this.N-1],s=1),h>=i&&(h=0)}for(n=this.N-1;n;n--){var r=this.mt[s-1]^this.mt[s-1]>>>30;this.mt[s]=(this.mt[s]^(1566083941*((4294901760&r)>>>16)<<16)+1566083941*(65535&r))-s,this.mt[s]>>>=0,s++,s>=this.N&&(this.mt[0]=this.mt[this.N-1],s=1)}this.mt[0]=2147483648},MersenneTwister.prototype.random_int=function(){var t,i=new Array(0,this.MATRIX_A);if(this.mti>=this.N){var s;for(this.mti==this.N+1&&this.init_seed(5489),s=0;s<this.N-this.M;s++)t=this.mt[s]&this.UPPER_MASK|this.mt[s+1]&this.LOWER_MASK,this.mt[s]=this.mt[s+this.M]^t>>>1^i[1&t];for(;s<this.N-1;s++)t=this.mt[s]&this.UPPER_MASK|this.mt[s+1]&this.LOWER_MASK,this.mt[s]=this.mt[s+(this.M-this.N)]^t>>>1^i[1&t];t=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK,this.mt[this.N-1]=this.mt[this.M-1]^t>>>1^i[1&t],this.mti=0}return t=this.mt[this.mti++],t^=t>>>11,t^=t<<7&2636928640,t^=t<<15&4022730752,t^=t>>>18,t>>>0},MersenneTwister.prototype.random_int31=function(){return this.random_int()>>>1},MersenneTwister.prototype.random_incl=function(){return this.random_int()*(1/4294967295)},MersenneTwister.prototype.random=function(){return this.random_int()*(1/4294967296)},MersenneTwister.prototype.random_excl=function(){return(this.random_int()+.5)*(1/4294967296)},MersenneTwister.prototype.random_long=function(){var t=this.random_int()>>>5,i=this.random_int()>>>6;return(67108864*t+i)*(1/9007199254740992)},module.exports=MersenneTwister;
},{}],60:[function(require,module,exports){
module.exports=function(n){var o=0;return function(r,t){for(o+=r;o>=n;)o-=n,t(n)}};
},{}],61:[function(require,module,exports){
module.exports={
 "main": {
  "first": true,
  "onEnter": "./scripts/main-enter",
  "onExit": "./scripts/main-exit"
 }
}

},{}],62:[function(require,module,exports){
function generateEntity(e,t){var r=t.add();for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return r}function shuffle(e){for(var t,r,n=e.length;0!==n;)r=Math.floor(Math.random()*n),n-=1,t=e[n],e[n]=e[r],e[r]=t;return e}module.exports={generateEntity:generateEntity,shuffle:shuffle};
},{}],63:[function(require,module,exports){
module.exports=require(2)
},{"/home/aquisenberry/Development/projects/games/memory/animations.json":2}],64:[function(require,module,exports){
module.exports={
 "simulation": [
  {
   "name": "splatjs:advanceTimers",
   "scenes": [
    "main"
   ]
  },
  {
   "name": "splatjs:advanceAnimations",
   "scenes": [
    "main"
   ]
  },
  {
   "name": "./systems/simulation/player-input",
   "scenes": [
    "main"
   ]
  },
  {
   "name": "splatjs:applyVelocity",
   "scenes": [
    "main"
   ]
  },
  {
   "name": "splatjs:boxCollider",
   "scenes": [
    "main"
   ]
  }
 ],
 "renderer": [
  {
   "name": "splatjs:clearScreen",
   "scenes": [
    "main"
   ]
  },
  {
   "name": "splatjs:viewport.moveToCamera",
   "scenes": [
    "main"
   ]
  },
  {
   "name": "./systems/renderer/render-player",
   "scenes": [
    "main"
   ]
  },
  {
   "name": "splatjs:drawImage",
   "scenes": [
    "main"
   ]
  },
  {
   "name": "splatjs:viewport.reset",
   "scenes": [
    "main"
   ]
  }
 ]
}

},{}]},{},[1]);
